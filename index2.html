<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Dead by Daylightクイズ</title>
<style>
  body {
    font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background: linear-gradient(to bottom, #f0f8ff, #cceeff);
    max-width: 600px;
    margin: 1rem auto;
    padding: 0 1rem;
    transition: background-color 0.8s ease;
  }
  h1 {
    text-align: center;
  }
  #progressBar {
    background-color: #eee;
    border-radius: 6px;
    height: 10px;
    width: 100%;
    margin-bottom: 1rem;
  }
  #progress {
    background-color: #1DA1F2;
    height: 100%;
    border-radius: 6px;
    width: 0%;
    transition: width 0.3s;
  }
  #quiz {
    background: white;
    border-radius: 12px;
    padding: 2rem;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
  }
  .question {
    font-weight: bold;
    margin-bottom: 1rem;
  }
  .options button {
    display: block;
    width: 100%;
    margin: 0.5rem 0;
    padding: 0.6rem;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    cursor: pointer;
    background-color: #f9f9f9;
    transition: all 0.2s ease;
  }
  .options button:hover {
    transform: scale(1.03);
    background-color: #e0f0ff;
  }
  #result {
    font-size: 1.2rem;
    margin-top: 2rem;
    text-align: center;
  }
  #shareBtn {
    display: none;
    background-color: #1DA1F2;
    color: white;
    border: none;
    border-radius: 6px;
    padding: 1rem 1.5rem;
    font-size: 1.1rem;
    cursor: pointer;
    margin: 2rem auto 1rem;
    display: block;
  }
  .correct {
    animation: correctPulse 0.5s ease;
    background-color: #c8f7c5 !important;
  }
  @keyframes correctPulse {
    0% { background-color: #c8f7c5; }
    50% { background-color: #a5e3a2; }
    100% { background-color: #c8f7c5; }
  }
  .wrong {
    animation: wrongShake 0.4s ease;
    background-color: #f7c5c5 !important;
  }
  @keyframes wrongShake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-5px); }
    75% { transform: translateX(5px); }
  }
</style>
</head>
<body>
<h1>Dead by Daylightクイズ</h1>
<div id="progressBar"><div id="progress"></div></div>
<div id="quiz"></div>
<div id="result"></div>
<button id="shareBtn" onclick="shareOnX()">結果をXでシェア</button>

<!-- 効果音 -->
<audio id="sound-correct" src="correct.mp3" preload="auto"></audio>
<audio id="sound-wrong" src="wrong.mp3" preload="auto"></audio>
<audio id="sound-finish" src="finish.mp3" preload="auto"></audio>

<script>
const questions = [
  {
    q: "Dead by Daylightの開発元はどこの国の会社？",
    o: ["カナダ", "アメリカ", "オーストラリア", "イギリス"],
    a: 0
  },
  {
    q: "Dead by Daylightに登場するキラー「レイス」の本名は？",
    o: ["フェリックス・リックス", "フィリップ・オジョモ", "ポール・モルガン", "トーマス・リース"],
    a: 1
  },
  {
    q: "Dead by Daylightの発売初日に対応していたプラットフォームはどれ？",
    o: ["PCとPlayStation 4", "PCのみ", "PCとXbox One", "PlayStation 4とXbox One"],
    a: 1
  },
  {
    q: "Dead by Daylightのキラー「ナース」の本名は？",
    o: ["サリー・スミスソン", "ペニー・ライス", "リサ・シャーマン", "メアリー・ジョーンズ"],
    a: 0
  },
  {
    q: "キラー「ドレッジ」と「ナイト」の間にリリースされたのは誰？",
    o: ["スカルマーチャント", "ウェスカー", "シンギュラリティ", "ネメシス"],
    a: 1
  },
  {
    q: "ドクターと一緒に実装されたサバイバーは誰？",
    o: ["ケイト・デンソン", "ビル・ウィリアムズ", "エース・ヴィスコンティ", "フェン・ミン"],
    a: 3
  },
  {
    q: "スカルマーチャントがDead by Daylightに実装された年は？",
    o: ["2021年", "2022年", "2023年", "2024年"],
    a: 2
  },
  {
    q: "Dead by Daylightで「ザ・ヒルビリー」の本名は？",
    o: ["サイモン・リード", "マックス・トンプソン・ジュニア", "エドワード・カーミット", "マーク・ヒル"],
    a: 1
  },
  {
    q: "Dead by Daylightの音楽やサウンドデザインを担当しているのは誰？",
    o: ["マーク・ロウレンス", "ミシェル・メイソン", "グレッグ・エリス", "サイモン・ヴィクランド"],
    a: 3
  },
  {
    q: "Dead by Daylightの世界観で、サバイバーたちを異世界に誘う「エンティティ」は元々何に由来する？",
    o: ["古代神話の闇の神", "人間の恐怖の集合体", "宇宙の混沌の象徴", "死者の魂の集合体"],
    a: 1
  }
];

let currentIndex = 0;
let score = 0;

function playSound(id) {
  const audio = document.getElementById(id);
  if (!audio) return;
  audio.currentTime = 0;
  audio.play().catch(e => {
    console.log("音再生エラー:", e);
  });
}

function updateProgress() {
  const percent = currentIndex >= questions.length ? 100 : (currentIndex / questions.length) * 100;
  document.getElementById("progress").style.width = percent + "%";
}

function showQuestion() {
  updateProgress();
  const quizDiv = document.getElementById("quiz");
  const resultDiv = document.getElementById("result");
  resultDiv.textContent = "";
  const shareBtn = document.getElementById("shareBtn");
  shareBtn.style.display = "none";

  const question = questions[currentIndex];
  quizDiv.innerHTML =
    `<div class="question">${currentIndex + 1}. ${question.q}</div>` +
    question.o
      .map(
        (opt, i) =>
          `<div class="options"><button onclick="checkAnswer(${i})">${opt}</button></div>`
      )
      .join("");

  setTimeout(() => {
    document.querySelectorAll(".options button").forEach(btn => btn.blur());
  }, 0);
}

function checkAnswer(selected) {
  const correctIndex = questions[currentIndex].a;
  const optionButtons = document.querySelectorAll(".options button");

  optionButtons[correctIndex].classList.add("correct");
  optionButtons[correctIndex].innerHTML += " ✅";

  if (selected !== correctIndex) {
    optionButtons[selected].classList.add("wrong");
    optionButtons[selected].innerHTML += " ❌";
    playSound("sound-wrong");
  } else {
    score++;
    playSound("sound-correct");
  }

  optionButtons.forEach(btn => btn.disabled = true);

  setTimeout(() => {
    currentIndex++;
    if (currentIndex < questions.length) {
      showQuestion();
    } else {
      showResult();
      playSound("sound-finish");
      updateProgress();
    }
  }, 2000);
}

function showResult() {
  document.getElementById("quiz").innerHTML = "";
  const resultDiv = document.getElementById("result");
  resultDiv.textContent = `あなたは ${score}/${questions.length} 問正解です！`;
  document.getElementById("shareBtn").style.display = "block";
}

function shareOnX() {
  const text = `Dead by Daylightクイズで ${score}/${questions.length} 問正解！引用かリツイートで結果を投稿してね！`;
  const url = "https://u-pos.github.io/yoichi-quiz"; // URLは適宜変更してください
  const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(
    text
  )}&url=${encodeURIComponent(url)}`;
  window.open(shareUrl, "_blank");
}

showQuestion();
</script>
</body>
</html>